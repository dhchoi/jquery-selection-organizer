!function(n){n("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery)}(function(n){"use strict";var e="data-selection-organizer-selected",t=".selection-organizer",i={opacity:"toggle"};n.fn.selectionOrganizer=function(r){function a(n,e,t,i){if(o()){var r=s();n.animate(r.start,c.animationDuration,function(){n.toggleClass(c.classSelected).detach()[e](t).animate(r.finish,c.animationDuration,function(){i(),c.callback()})})}else n.detach()[e](t);return n}function o(){return!c.showAnimation||n.isEmptyObject(c.animationProperties)?!1:!0}function s(){return c.animationProperties.start&&c.animationProperties.finish?{start:c.animationProperties.start,finish:c.animationProperties.finish}:c.animationProperties.start||c.animationProperties.finish?{start:c.animationProperties.start||i,finish:c.animationProperties.finish||i}:{start:c.animationProperties,finish:c.animationProperties}}var c=n.extend(n.fn.selectionOrganizer.settings,r);return this.each(function(i,r){function s(t){u();var i=n(this),r=!1;i.attr(e,"true"==i.attr(e)?!1:!0);var s=p.find("["+e+"=true]"),h=s.length,m=l(s,h);if("true"==i.attr(e))if(h-=1,m=l(s,h),h>0)c.sendToEnd?i.next().is(m)||(a(i,"insertBefore",m,d),r=!0):i.prev().is(m)||(a(i,"insertAfter",m,d),r=!0);else{var g=f();if(c.sendToEnd){var P=g[g.length-1];i.is(P)||(a(i,"appendTo",p,d),r=!0)}else{var v=g[0];i.is(v)||(a(i,"prependTo",p,d),r=!0)}}else h>0&&(c.sendToEnd?i.next().is(m)||(a(i,"insertBefore",m,d),r=!0):i.prev().is(m)||(a(i,"insertAfter",m,d),r=!0));(!o()||o()&&!r)&&(i.toggleClass(c.classSelected),d(),c.callback())}function l(n,e){return c.sendToEnd?n[n.length-e]||null:n[e-1]||null}function f(){return p.children(c.selector)}function u(){h.each(function(e,i){n(i).off("click"+t)})}function d(){h.each(function(e,i){n(i).on("click"+t,s)})}var p=n(r),h=f();h.each(function(i,r){n(r).attr(e,!1),n(r).on("click"+t,s)})})},n.fn.selectionOrganizer.settings={selector:"li",classSelected:"selection-organizer-selected",showAnimation:!0,animationProperties:i,animationDuration:300,sendToEnd:!1,callback:function(){}}});