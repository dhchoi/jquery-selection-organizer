!function(e){e("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery)}(function(e){"use strict";var t="data-selection-organizer-selected",n=".selection-organizer",i={selector:".selection-organizer-child",classSelected:"selection-organizer-selected",showAnimation:!0,animationProperties:{opacity:"toggle"},animationDuration:300,sendToEnd:!1,callback:function(e){}};e.fn.selectionOrganizer=function(r){var o=this.settings=e.extend({},i,r);return this.each(function(r,a){function s(n){p();var i=e(this),r=!1;i.attr(t,"true"==i.attr(t)?!1:!0);var a=h.find("["+t+"=true]"),s=a.length,f=u(a,s);if("true"==i.attr(t))if(s-=1,f=u(a,s),s>0)o.sendToEnd?i.next().is(f)||(c(i,"insertBefore",f,m),r=!0):i.prev().is(f)||(c(i,"insertAfter",f,m),r=!0);else{var g=d();if(o.sendToEnd){var P=g[g.length-1];i.is(P)||(c(i,"appendTo",h,m),r=!0)}else{var v=g[0];i.is(v)||(c(i,"prependTo",h,m),r=!0)}}else s>0&&(o.sendToEnd?i.next().is(f)||(c(i,"insertBefore",f,m),r=!0):i.prev().is(f)||(c(i,"insertAfter",f,m),r=!0));(!l()||l()&&!r)&&(i.toggleClass(o.classSelected),m(),o.callback(i))}function c(e,t,n,i){if(l()){var r=f();e.animate(r.start,o.animationDuration,function(){e.toggleClass(o.classSelected).detach()[t](n).animate(r.finish,o.animationDuration,function(){i(),o.callback(e)})})}else e.detach()[t](n);return e}function l(){return!o.showAnimation||e.isEmptyObject(o.animationProperties)?!1:!0}function f(){return o.animationProperties.start&&o.animationProperties.finish?{start:o.animationProperties.start,finish:o.animationProperties.finish}:o.animationProperties.start||o.animationProperties.finish?{start:o.animationProperties.start||i.animationProperties,finish:o.animationProperties.finish||i.animationProperties}:{start:o.animationProperties,finish:o.animationProperties}}function u(e,t){return o.sendToEnd?e[e.length-t]||null:e[t-1]||null}function d(){return h.children(o.selector)}function p(){h.off("click"+n)}function m(){h.on("click"+n,o.selector,s)}var h=e(a);m()})}});