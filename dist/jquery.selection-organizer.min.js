!function(i){"object"==typeof module&&"object"==typeof module.exports?i(require("jquery")):i(jQuery)()}(function(i){"use strict";var e={opacity:"toggle"};i.fn.selectionOrganizer=function(n){function t(i,e,n,t){if(a()){var o=r();i.animate(o.start,c.animationSpeed,function(){i.toggleClass(c.selectedChildClass).detach()[e](n).animate(o.finish,c.animationSpeed,function(){t(),c.callback()})})}else i.detach()[e](n);return i}function a(){return!c.showAnimation||i.isEmptyObject(c.animation)?!1:!0}function r(){return c.animation.start&&c.animation.finish?{start:c.animation.start,finish:c.animation.finish}:c.animation.start||c.animation.finish?{start:c.animation.start||e,finish:c.animation.finish||e}:{start:c.animation,finish:c.animation}}var o="data-selection-organizer-selected",s=".selection-organizer",c=i.extend(i.fn.selectionOrganizer.settings,n);return this.each(function(e,n){function r(e){l();var n=i(this),r=!1;n.attr(o,"true"==n.attr(o)?!1:!0);var s=u.find("["+o+"=true]"),h=s.length,d=h>0?s[h-1]:null;if("true"==n.attr(o)){if(h-=1,d=h>0?s[h-1]:null,h>0)c.reverse||n.prev().is(d)||(t(n,"insertAfter",d,f),r=!0);else if(!c.reverse){var m=u.children(c.childSelector)[0];n.is(m)||(t(n,"prependTo",u,f),r=!0)}}else h>0&&(c.reverse||n.prev().is(d)||(t(n,"insertAfter",d,f),r=!0));(!a()||a()&&!r)&&(n.toggleClass(c.selectedChildClass),f(),c.callback())}function l(){h.each(function(e,n){i(n).off("click"+s)})}function f(){h.each(function(e,n){i(n).on("click"+s,r)})}var u=i(n),h=u.children(c.childSelector);h.each(function(e,n){i(n).attr(o,!1),i(n).on("click"+s,r)})})},i.fn.selectionOrganizer.settings={childSelector:"li",selectedChildClass:"selection-organizer-selected",showAnimation:!0,animation:e,animationSpeed:300,reverse:!1,callback:function(){}}});